# NSAPool-PenTest

## PenTest audit

### What we found

At first, we can notice that there is more than one page we can access to. At looking at it more closely we can see that we can access it by two ways : HTTPS and HTTP. **One of the solution could be to only authorize HTTPS connection for more safety**.

Then by pinging the website with the command : 
``` ping lab.epidoc.eu ```
We succeeded in getting the IP adress of the website (217.182.188.20). Thanks to this IP, we can now do more things on the website :

- First of all, retrace it to know more about the location of it.
- See open ports
- See other domains linked to this IP


**You'll find the picture by looking at "IP1.png"**
![IP1](https://user-images.githubusercontent.com/90464649/139535435-b9c9c666-570d-4128-8dc8-9a93131ff096.jpg)


Then, after seeing that port 22 was open, but also seeing a domain name and hostname (even more : geolocation, name...etc.), we went to see the domain name to see if there are more interesting things : 

**You'll find results as "DomainName.jpg"**.
![DomainName](https://user-images.githubusercontent.com/90464649/139535371-1ff8d2fb-2918-45a2-a4ea-038a4e6bd3ec.jpg)


We can notice that there more than one domaine under the name of baptisteheraud.com with each one differents open ports. We tried to see if some of this ports were also open is the website. We tried first the 8080 port by typing ```lab.epidoc.eu:8080/``` and the server returned us an admin page with some infos on it, such as user names and some nologin.

**You'll find these results as Port8080.jpg**
![Port8080](https://user-images.githubusercontent.com/90464649/139535466-1f5d58eb-d371-4d4b-91b3-ad6e3c70e045.jpg)


The thing is, beyond the fact that we can access several domains of the owner, is that we can also see a lot of infos about him, like his name, geolocation...etc. And this could be a security problem regarding the privacy of the user. Furthermore if we dig a little bit more with some technos that we can find on GitHub (such as [Maigret](https://github.com/torerobo/maigret) or [Holehe](https://github.com/megadose/holehe)), we can easily access some "confidential" datas like his email, phone number, adress...etc.

### Let's talk about the new IP
Because of the crash of the server, the IP changed for : **217.182.188.20**
Firts, we checked with nmap to see witch ports were open
![NmapIP](https://user-images.githubusercontent.com/90464649/139542652-6dc658a3-ced7-4c58-b7b1-89827492583c.jpg)


This time, there were more opened ports, so we went back to [Shodan.io] to try and get more infos


![ShodanIP2](https://user-images.githubusercontent.com/90464649/139542678-e0781218-fbd7-41c7-b2ef-a751436f5b0e.jpg)
![ShodanPorts2](https://user-images.githubusercontent.com/90464649/139542686-245ed9c2-c69b-4809-9448-ee2ca9d5b7e6.jpg)


At this try, shodan returns us numbers of vuln√©rabilities, especially some linked to Apache2 and HTTP protocol. Some interested us, like the **CVE-2019-0217** and **CVE-2021-3449**. **Those mistakes could be resolved by upgrading Apache to get a more recent version, and those vulerabilites should be fixed**
![Screenshot from 2021-10-30 19-28-12](https://user-images.githubusercontent.com/90464649/139543326-23ed5ec2-bf89-45fa-8914-6ec5c9b51009.jpg)
![Screenshot from 2021-10-30 19-27-21](https://user-images.githubusercontent.com/90464649/139543330-7d516f42-4d95-4eac-8814-240b2c68755e.jpg)


Then we asked ourselves  if it was possible to log in as gtp. We typed the command ```ftp 217.182.188.20``` and we logged in as anonymous user and password "root" et we accessed to different files. **Solution here, could be to desactive authentication as anonymous user**.

![Screenshot from 2021-10-30 19-41-12](https://user-images.githubusercontent.com/90464649/139543760-460af7c8-3471-4d64-a03b-e4f0451c8bf0.jpg)


Furthermor, on admin page, without logging we can find by examining the page, a salted password that is not hashed yes, it should be possible to decode it and use it with full efficence```x6LvvMPG7DD4pqNX3bscd3w866mAP442```

***
DISCLAIMER : Our purpose was not to impair the website or to down it. We just looked for some vulnerabilites in order to reinforce its safety after the entreprise asked for it. 

cf. pentest.odt for more informations.

