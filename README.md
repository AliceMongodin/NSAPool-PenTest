# NSAPool-PenTest

## PenTest audit

### Ce qu'on a pu trouver 
Au premier abord sur le site on peut remarquer qu'il y a plusieurs pages accessibles. En regardant de plus près on voit que chacune peut passer soit au format HTTPS aussi bien qu'HTTP. **Une des premières mesures a prendre serait donc d'autoriser uniquement des connections en HTTPS pour plus de sécurité**.

Ensuite en pingant le site avec la commande :
``` ping lab.epidoc.eu ```
On a réussi a récuperer l'adresse IP du site (217.182.188.20). Grace à cette adresse IP, nous pouvons donc faire diverses manoeuvres sur le site :


- Premièrement retracer l'ip pour en savoir plus sur sa localisation
- Voir les ports ouverts
- Voir les autres domaines liés à cette IP.


**Vous trouverez l'image, ci-jointe en tant que IP1.**
![IP1](https://user-images.githubusercontent.com/90464649/139535435-b9c9c666-570d-4128-8dc8-9a93131ff096.jpg)


Ensuite, apres avoir vu que d'une part le port 22 était ouvert, mais aussi un nom de domaine et un hostname (c'est sans parler de la geolocalisation). Donc nous avons cliqué sur ce nom de domaine pour voir si il y avait des choses intéressantes :

**Vous trouverez les résultats ci-joint en tant que DomainName**.
![DomainName](https://user-images.githubusercontent.com/90464649/139535371-1ff8d2fb-2918-45a2-a4ea-038a4e6bd3ec.jpg)


Nous pouvons donc remarquer qu'il y a plusieurs domaines sous le nom de baptisteheraud.com avec chacuns divers ports ouverts. Nous avons donc essayé de voir si certains de ces ports étaient ouverts également sur le site demandé. Nous avons donc d'abord essayé avec le port 8080 en tappant ```lab.epidoc.eu:8080/``` et le serveur nous a retourné en retour une page admin avec diverses informations dessus, dont le nom de plusieurs users ainsi qu'un nologin.

**Vous trouverez les résultats ci-joint en tant que Port8080** 
![Port8080](https://user-images.githubusercontent.com/90464649/139535466-1f5d58eb-d371-4d4b-91b3-ad6e3c70e045.jpg)


Le problème ici, au delà du fait que nous ayons accès a divers domaines du propriétaire, est que nous avons accès a beaucoup d'informations le concernant, comme son nom ou encore sa localisation ce qui pourrait être une faille de sécurité concernant la sécurité de l'utilisateur. Surtout que si on creuse un peu plus avec certaines fonctionnalités que l'on peut trouver sur github notamment (telle que [Maigret](https://github.com/torerobo/maigret) ou [Holehe](https://github.com/megadose/holehe)), on se retrouve vite a connaitre diverses informations plus "confidentielles", telle que son email, numéro de téléphone...etc.

### Passons a la nouvelle IP
L'IP ayant changé après le down du serveur, elle est maintenant marquée a l'ip **217.182.188.20**. 
Nous avons tout d'abord fait un nmap pour voir quels ports étaient ouvert une fois de plus 
![NmapIP](https://user-images.githubusercontent.com/90464649/139542652-6dc658a3-ced7-4c58-b7b1-89827492583c.jpg)


Cette fois-ci, il y avait plus de ports ouverts, nous sommes donc repassés par [Shodan.io] pour essayer de récuperer plus d'informations


![ShodanIP2](https://user-images.githubusercontent.com/90464649/139542678-e0781218-fbd7-41c7-b2ef-a751436f5b0e.jpg)
![ShodanPorts2](https://user-images.githubusercontent.com/90464649/139542686-245ed9c2-c69b-4809-9448-ee2ca9d5b7e6.jpg)


De plus, cette fois-ci shodan nous retourne un nombre de vulnérabilité assez élevé notamment plusieurs vulnérabilités liées a Apache2 et le protocole HTTP. Plusieurs ont retenu notre attention, comme l'erreur **CVE-2019-0217** et **CVE-2021-3449**. **Ces erreurs pourraient être résolues en faisant une upgrade de Apache pour passer à une version plus récente ou ces vulnérabilités sont résolues**.

![Screenshot from 2021-10-30 19-28-12](https://user-images.githubusercontent.com/90464649/139543326-23ed5ec2-bf89-45fa-8914-6ec5c9b51009.jpg)
![Screenshot from 2021-10-30 19-27-21](https://user-images.githubusercontent.com/90464649/139543330-7d516f42-4d95-4eac-8814-240b2c68755e.jpg)

Par la suite nous nous sommes demandé si il était possible de se connecter en ftp. Nous avons donc tapé la commande ```ftp 217.182.188.20``` et nous nous sommes inscrit en tant qu'anonymous user avec comme mot de passe "root" et nous avons pu accéder a plusieurs dossiers différents. **La solution ici pourrait être de désactiver l'authentification en anonymous user**. 

![Screenshot from 2021-10-30 19-41-12](https://user-images.githubusercontent.com/90464649/139543760-460af7c8-3471-4d64-a03b-e4f0451c8bf0.jpg)


De plus sur la page admin, sans se log on peut retrouver en examinant la page un mot de passe salé mais pas encore haché, il devrait donc être possible de le désaler et de l'utiliser a plein escient. ```x6LvvMPG7DD4pqNX3bscd3w866mAP442```

***
DISCLAIMER : Notre but n'était pas de nuire a au site web, ni de le down, nous avons juste cherché quelques failles afin d'en renforcer sa sécurité a la demande de l'entreprise. 

cf. pentest.odt pour quelques informations supplémentaires trouvées mais que nous n'avons pas su exploiter.

